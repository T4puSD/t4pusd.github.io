<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Challenges of Implementing Soft Delete - t4pusd | Tech Blog</title><meta name="Description" content="t4pusd&#39;s Tech Blog!"><meta property="og:url" content="https://t4pusd.github.io/posts/challenges-of-implementing-soft-delete/">
  <meta property="og:site_name" content="t4pusd | Tech Blog">
  <meta property="og:title" content="Challenges of Implementing Soft Delete">
  <meta property="og:description" content="Agenda 📋 In this blog post, we will explore the challenges of implementing the Soft Delete feature and discuss measures to mitigate those challenges.
What is Soft Delete? 🗑️ Often in enterprise applications, we need to provide a feature for auditing and recovering accidentally deleted data. That feature is called Soft Delete.
The definition of soft delete is pretty simple: deleting data at a logical level instead of actually deleting it in the database. Implementation-wise, it’s straightforward as well: marking data as deleted in the database layer and ignoring that data in the application layer.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-26T17:32:06+06:00">
    <meta property="article:modified_time" content="2024-03-26T17:32:06+06:00">
    <meta property="article:tag" content="Soft Delete">
    <meta property="article:tag" content="Database">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Challenges of Implementing Soft Delete">
  <meta name="twitter:description" content="Agenda 📋 In this blog post, we will explore the challenges of implementing the Soft Delete feature and discuss measures to mitigate those challenges.
What is Soft Delete? 🗑️ Often in enterprise applications, we need to provide a feature for auditing and recovering accidentally deleted data. That feature is called Soft Delete.
The definition of soft delete is pretty simple: deleting data at a logical level instead of actually deleting it in the database. Implementation-wise, it’s straightforward as well: marking data as deleted in the database layer and ignoring that data in the application layer.">
<meta name="application-name" content="t4pusd | Tech Blog">
<meta name="apple-mobile-web-app-title" content="t4pusd | Tech Blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://t4pusd.github.io/posts/challenges-of-implementing-soft-delete/" /><link rel="prev" href="https://t4pusd.github.io/posts/spring_boot_reactive_jwt/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Challenges of Implementing Soft Delete",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/t4pusd.github.io\/posts\/challenges-of-implementing-soft-delete\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/t4pusd.github.io\/images\/logo.png",
                            "width":  209 ,
                            "height":  210 
                        }],"genre": "posts","keywords": "Soft Delete, Database","wordcount":  485 ,
        "url": "https:\/\/t4pusd.github.io\/posts\/challenges-of-implementing-soft-delete\/","datePublished": "2024-03-26T17:32:06+06:00","dateModified": "2024-03-26T17:32:06+06:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Tapu Sutradhar"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="t4pusd | Tech Blog"><span class="header-title-pre"><i class='fa-regular fa-keyboard'></i>&nbsp;</span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/">&#128424; Posts </a><a class="menu-item" href="/tags/">&#128204; Tags </a><a class="menu-item" href="/aboutme/">&#128129; About </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="t4pusd | Tech Blog"><span class="header-title-pre"><i class='fa-regular fa-keyboard'></i>&nbsp;</span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">&#128424;Posts</a><a class="menu-item" href="/tags/" title="">&#128204;Tags</a><a class="menu-item" href="/aboutme/" title="">&#128129;About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Challenges of Implementing Soft Delete</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Tapu Sutradhar</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-03-26">2024-03-26</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;485 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;3 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#agenda-">Agenda 📋</a></li>
    <li><a href="#what-is-soft-delete-">What is Soft Delete? 🗑️</a></li>
    <li><a href="#challenges-of-implementing-soft-delete-">Challenges of Implementing Soft Delete 🚧</a>
      <ul>
        <li><a href="#1-development-burden-">1. Development Burden 😩</a></li>
        <li><a href="#2-unique-data-constraint-with-soft-delete-">2. Unique Data Constraint with Soft Delete 🔄</a></li>
      </ul>
    </li>
    <li><a href="#solutions-to-mitigate-challenges-">Solutions to Mitigate Challenges 🛠️</a>
      <ul>
        <li><a href="#1-development-burden">1. Development Burden</a></li>
        <li><a href="#2-unique-data-constraint-with-soft-delete">2. Unique Data Constraint with Soft Delete</a></li>
      </ul>
    </li>
    <li><a href="#conclusion-">Conclusion 🎉</a></li>
    <li><a href="#demo-project-link-">Demo Project Link 🔗</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="agenda-">Agenda 📋</h2>
<p>In this blog post, we will explore the challenges of implementing the Soft Delete feature and discuss measures to mitigate those challenges.</p>
<h2 id="what-is-soft-delete-">What is Soft Delete? 🗑️</h2>
<p>Often in enterprise applications, we need to provide a feature for auditing and recovering accidentally deleted data. That feature is called <strong>Soft Delete</strong>.</p>
<p>The definition of soft delete is pretty simple: deleting data at a logical level instead of actually deleting it in the database. Implementation-wise, it&rsquo;s straightforward as well: marking data as deleted in the database layer and ignoring that data in the application layer.</p>
<h2 id="challenges-of-implementing-soft-delete-">Challenges of Implementing Soft Delete 🚧</h2>
<p>Even though the feature seems simple to implement, maintaining it in the whole project can be a burden for developers. Let&rsquo;s delve into why.</p>
<h3 id="1-development-burden-">1. Development Burden 😩</h3>
<p>When implementing any logic, developers need to consider the presence of soft deleted data. Business logic must filter out soft deleted data to ensure the application returns valid data. Without a clear abstraction this may lead to system failure.</p>
<h3 id="2-unique-data-constraint-with-soft-delete-">2. Unique Data Constraint with Soft Delete 🔄</h3>
<p>Implementing validation constraints at the database layer is crucial for data integrity. However, uniqueness validation constraints don&rsquo;t align well with the soft delete feature.</p>
<p>As we&rsquo;re not actually deleting the data in the database, but rather marking it as deleted, a uniqueness constraint can lead to confusion. Subsequent attempts to save the same data may result in a duplicate key error, without clear indication as to why.</p>
<h2 id="solutions-to-mitigate-challenges-">Solutions to Mitigate Challenges 🛠️</h2>
<h3 id="1-development-burden">1. Development Burden</h3>
<p>Frameworks often promote the 3-tier architecture for software development. By leveraging this architecture, we can easily ignore soft deleted data at the data tier (e.g., Data Access Layer/Repository Layer). This ensures that data returned by the layer is filtered to exclude marked deleted data, allowing the service layer to process only relevant data.</p>
<p>For instance, in <code>Spring Boot</code>, JPA is commonly used for database access. By creating a custom <code>SoftDeleteRepository</code> that filters out soft deleted data, we can ensure that repository layer classes consistently return data without soft deleted entries.</p>
<h3 id="2-unique-data-constraint-with-soft-delete">2. Unique Data Constraint with Soft Delete</h3>
<p>Dealing with unique constraints at the database level can be tricky. One way to mitigate this issue is by using Partial Indexing. Many modern databases support this feature, where an index is applied based on defined conditions.</p>
<p>For example, if we have a boolean marker property named <code>deleted</code>, with <code>true</code> indicating a deleted entry and <code>false</code> indicating an active one, we can apply a partial index to exclude deleted entries. This ensures that unique constraints only apply to active data, preventing conflicts with soft deleted entries.</p>
<h2 id="conclusion-">Conclusion 🎉</h2>
<p>In this post, we&rsquo;ve explored the challenges of the soft delete pattern and discussed techniques to mitigate them at both the application and database levels.</p>
<h2 id="demo-project-link-">Demo Project Link 🔗</h2>
<p>Check out a demo project showcasing the soft delete feature using Spring Boot and MongoDB: <a href="https://github.com/T4puSD/spring-boot-mongodb-softdelete" target="_blank" rel="noopener noreffer ">Spring Boot MongoDB Soft Delete</a></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2024-03-26</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://t4pusd.github.io/posts/challenges-of-implementing-soft-delete/" data-title="Challenges of Implementing Soft Delete" data-hashtags="Soft Delete,Database"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://t4pusd.github.io/posts/challenges-of-implementing-soft-delete/" data-hashtag="Soft Delete"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://t4pusd.github.io/posts/challenges-of-implementing-soft-delete/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://t4pusd.github.io/posts/challenges-of-implementing-soft-delete/" data-title="Challenges of Implementing Soft Delete"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://t4pusd.github.io/posts/challenges-of-implementing-soft-delete/" data-title="Challenges of Implementing Soft Delete"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/soft-delete/">Soft Delete</a>,&nbsp;<a href="/tags/database/">Database</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/spring_boot_reactive_jwt/" class="prev" rel="prev" title="Spring Boot Reactive JWT"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Spring Boot Reactive JWT</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.147.8">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Tapu Sutradhar</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"data":{"id-1":"t4pusd","id-2":"t4pusd"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
